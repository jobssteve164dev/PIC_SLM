# 半导体芯片缺陷检测系统

## 项目概述

本系统是一个用于半导体芯片AOI（自动光学检测）缺陷图像分类的工具，提供了从图像预处理、数据标注到模型训练和预测的完整解决方案。系统采用PyQt5构建图形界面，使用PyTorch深度学习框架进行模型训练，支持多种预训练模型和数据增强方法。

## 功能特点

### 1. 图像预处理
- 批量调整图像尺寸和格式
- 亮度和对比度调整
- 自动创建训练集和验证集
- 多级数据增强（基础/中等/强化）

### 2. 图像标注
- 支持LabelImg（矩形标注）和LabelMe（多边形标注）工具
- 自动安装标注工具（如未安装）
- 缺陷类别管理
- 预定义类别文件生成

### 3. 模型训练
- 支持多种深度学习模型（ResNet18/ResNet50/EfficientNet）
- 可调整训练参数（批次大小、学习率、训练轮数）
- 实时训练进度和精度显示
- 自动保存最佳模型

### 4. 缺陷预测
- 单张图像预测
- 显示多个可能的缺陷类别及其概率
- 可视化预测结果

## 系统要求

- Python 3.7+
- Windows/Linux/MacOS

## 安装说明

1. 克隆或下载本项目

2. 安装依赖包
```bash
pip install -r requirements.txt
```

3. 运行程序
```bash
python src/main.py
```

## 使用指南

### 1. 数据处理

1. 选择包含原始图像的源文件夹
2. 选择输出根目录（系统将自动创建子目录）
3. 设置图像处理参数：
   - 目标尺寸（224x224、256x256等或自定义）
   - 目标格式（JPG/PNG/BMP）
   - 亮度和对比度调整
4. 设置数据集参数：
   - 训练集比例（默认0.8）
   - 数据增强级别
5. 点击"开始处理数据"
6. 处理完成后，点击"进入图片标注"

### 2. 图像标注

1. 选择标注工具（LabelImg或LabelMe）
2. 添加缺陷类别
3. 点击"启动标注工具"
4. 在打开的标注工具中标注图像
5. 保存标注结果

### 3. 模型训练

1. 选择标注数据文件夹
2. 选择模型类型
3. 设置训练参数
4. 点击"开始训练"
5. 训练过程中可随时查看进度和精度

### 4. 缺陷预测

1. 选择要预测的图像
2. 点击"开始预测"
3. 查看预测结果

## 项目结构

```
semiconductor_defect_detection/
├── data/                  # 数据目录
│   ├── raw/               # 原始图像
│   └── processed/         # 处理后的图像
├── models/                # 模型目录
│   └── saved_models/      # 保存的模型
├── src/                   # 源代码
│   ├── ui/                # 用户界面
│   │   ├── __init__.py
│   │   └── main_window.py # 主窗口
│   ├── __init__.py
│   ├── main.py            # 主程序
│   ├── data_processor.py  # 数据处理
│   ├── image_preprocessor.py # 图像预处理
│   ├── annotation_tool.py # 标注工具
│   ├── model_trainer.py   # 模型训练
│   └── predictor.py       # 预测
├── config/                # 配置文件
└── requirements.txt       # 依赖包
```

## 注意事项

1. 首次使用标注工具时，系统会自动安装相应的工具，请确保网络连接正常
2. 对于大量图像，预处理和训练可能需要较长时间，请耐心等待
3. 训练模型时，如有GPU将自动使用，可大幅提升训练速度
4. 建议使用统一尺寸和格式的图像进行训练，以获得更好的效果

## 开发者信息

本系统基于Python开发，使用PyQt5构建图形界面，PyTorch作为深度学习框架。如需进一步开发或定制，请参考源代码中的注释说明。

## 许可证

MIT License 