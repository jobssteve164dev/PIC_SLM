# 代码重构说明

## 重构目标

将原来的单一`main_window.py`文件（约4700行代码）拆分成多个模块化的标签页类，以提高代码的可维护性和可扩展性。

## 重构内容

1. 创建了一个基础的`BaseTab`类，作为所有标签页的父类，提供通用功能：
   - 创建滚动区域
   - 更新状态信息
   - 更新进度条

2. 将原来的各个标签页功能拆分成独立的类：
   - `data_processing_tab.py` - 图像预处理标签页
   - `annotation_tab.py` - 图像标注标签页
   - `training_tab.py` - 模型训练标签页
   - `prediction_tab.py` - 模型预测标签页
   - `batch_prediction_tab.py` - 批量预测标签页
   - `evaluation_tab.py` - 模型评估标签页
   - `tensorboard_tab.py` - TensorBoard可视化标签页
   - `settings_tab.py` - 设置标签页
   - `about_tab.py` - 关于标签页

3. 创建了一个新的主窗口类`new_main_window.py`，负责组织和管理所有标签页：
   - 创建各个标签页实例
   - 连接各个标签页的信号
   - 提供统一的状态栏和进度条

4. 创建了一个新的入口文件`new_main.py`，使用新的主窗口类：
   - 加载配置
   - 创建应用
   - 创建主窗口
   - 创建工作线程
   - 连接信号

## 重构优势

1. **代码组织更清晰**：每个标签页的功能都被封装在独立的类中，使代码结构更加清晰。

2. **提高可维护性**：修改某个标签页的功能时，只需修改相应的类文件，不会影响其他功能模块。

3. **提高可扩展性**：添加新的标签页或功能时，只需创建新的类文件，然后在主窗口中添加即可。

4. **减少代码重复**：通过`BaseTab`类提供通用功能，减少了代码重复。

5. **降低复杂度**：将4700行的单一文件拆分成多个较小的文件，每个文件的复杂度都大大降低。

## 使用方法

要使用新的模块化版本，请运行：

```bash
python src/new_main.py
```

如果需要运行原始版本，可以使用：

```bash
python src/main.py
```

## 注意事项

1. 新版本和旧版本可以并行存在，不会相互影响。

2. 新版本保留了原有的所有功能，只是将代码结构进行了优化。

3. 配置文件是共享的，因此在一个版本中修改的设置会影响另一个版本。

4. 如果需要进一步优化，可以考虑将信号处理逻辑也拆分到各个标签页中，减少主窗口的职责。 