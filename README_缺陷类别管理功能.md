# 缺陷类别管理功能说明

## 概述
在图片模型训练系统的设置界面中，我们为"默认缺陷类别"功能新增了文件导入导出功能，使用户能够方便地管理和分享缺陷类别配置。

## 新增功能

### 1. 保存到文件功能
- **位置**: 设置界面 → 常规设置 → 默认缺陷类别 → "保存到文件" 按钮
- **功能**: 将当前配置的缺陷类别列表保存到本地文件
- **支持格式**:
  - **JSON格式** (.json): 结构化数据，包含类别列表和元数据
  - **文本格式** (.txt): 简单的文本格式，每行一个类别

#### JSON格式示例
```json
{
    "defect_classes": [
        "Missing_hole",
        "Mouse_bite",
        "Open_circuit",
        "Short",
        "Spur",
        "Spurious_copper"
    ],
    "total_count": 6,
    "created_by": "图片模型训练系统",
    "version": "1.0"
}
```

#### 文本格式示例
```
缺陷类别列表
====================
1. Missing_hole
2. Mouse_bite
3. Open_circuit
4. Short
5. Spur
6. Spurious_copper

总计: 6 个类别
```

### 2. 从文件加载功能
- **位置**: 设置界面 → 常规设置 → 默认缺陷类别 → "从文件加载" 按钮
- **功能**: 从本地文件加载缺陷类别列表
- **支持格式**: JSON文件、文本文件
- **加载模式**:
  - **替换模式**: 清空当前类别，用文件中的类别替换
  - **追加模式**: 将文件中的类别添加到当前类别列表（自动去重）

#### 支持的文件格式
1. **JSON格式**: 
   - 系统导出的标准格式
   - 自定义JSON格式（包含 'classes' 或 'defect_classes' 字段）
   - 纯数组格式
2. **文本格式**: 
   - 每行一个类别名称
   - 支持编号格式（如 "1. 类别名"）
   - 自动跳过标题行和分隔符

## 使用场景

### 1. 备份和恢复
- 保存当前配置作为备份
- 在重新安装或迁移系统时快速恢复类别配置

### 2. 团队协作
- 团队成员之间共享标准化的缺陷类别配置
- 确保不同用户使用相同的类别标准

### 3. 项目管理
- 为不同项目保存不同的类别配置
- 快速切换不同项目的类别设置

### 4. 批量导入
- 从其他系统或文档中批量导入大量类别
- 避免逐个手动输入的繁琐操作

## 操作步骤

### 保存类别到文件
1. 在设置界面配置好需要的缺陷类别
2. 点击"保存到文件"按钮
3. 选择保存位置和文件格式
4. 点击保存，系统会显示保存成功的确认信息

### 从文件加载类别
1. 点击"从文件加载"按钮
2. 选择要加载的文件（JSON或文本格式）
3. 系统会显示文件中找到的类别预览
4. 选择加载模式（替换或追加）
5. 确认后系统会显示加载结果统计

## 注意事项

1. **文件编码**: 建议使用UTF-8编码，确保中文类别名称正确显示
2. **格式要求**: JSON文件必须是有效的JSON格式，文本文件每行一个类别
3. **去重处理**: 加载时会自动去除重复的类别名称
4. **错误处理**: 如果文件格式不正确，系统会显示详细的错误信息
5. **数据安全**: 加载前系统会显示预览，避免意外覆盖重要数据

## 示例文件
项目中提供了两个示例文件供参考：
- `defect_classes_example.json`: JSON格式示例
- `defect_classes_example.txt`: 文本格式示例

您可以使用这些示例文件测试加载功能，或作为创建自己配置文件的模板。 